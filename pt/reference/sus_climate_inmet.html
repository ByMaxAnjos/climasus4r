<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Import and Process INMET Meteorological Data — sus_climate_inmet • climasus4r</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Inter-0.4.10/font.css" rel="stylesheet"><link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Import and Process INMET Meteorological Data — sus_climate_inmet"><meta name="description" content="sus_climate_inmet() downloads, imports, standardizes, and quality-controls
Brazilian meteorological data from the National Institute of Meteorology (INMET).
The function implements a comprehensive processing pipeline:
Download: Multi-year data with automatic retry and backoff
Parsing: Handles INMET's CSV format with metadata extraction
Standardization: Renames columns to canonical names (see Variables)
Quality Control: Physical consistency checks (see QC Details)
Caching: Two-level (memory + disk) with Parquet format
Parallel Processing: Both between and within years

"><meta property="og:description" content="sus_climate_inmet() downloads, imports, standardizes, and quality-controls
Brazilian meteorological data from the National Institute of Meteorology (INMET).
The function implements a comprehensive processing pipeline:
Download: Multi-year data with automatic retry and backoff
Parsing: Handles INMET's CSV format with metadata extraction
Standardization: Renames columns to canonical names (see Variables)
Quality Control: Physical consistency checks (see QC Details)
Caching: Two-level (memory + disk) with Parquet format
Parallel Processing: Both between and within years

"><link rel="stylesheet" href="pkgdown/assets/custom-modern.css"><link rel="icon" type="image/png" href="pkgdown/assets/favicon.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">climasus4r</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html">Início</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/about.html">Sobre</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/tutorials.html">Tutoriais</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/case-studies.html">Estudos de Caso</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-comunidade" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Comunidade</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-comunidade"><li><a class="external-link dropdown-item" href="https://github.com/ByMaxAnjos/climasus4r/issues">GitHub Issues</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/ByMaxAnjos/climasus4r/discussions">Discussions</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Referências</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Notícias</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://climasus4r.manus.space/" target="_blank"><span class="fa fa-robot"></span> AI Assistant</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ByMaxAnjos/climasus4r"><span class="fa fa-github"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../../en/index.html">English</a></li>
<li class="nav-item"><a class="nav-link" href="../../es/index.html">Español</a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Import and Process INMET Meteorological Data</h1>
      <small class="dont-index">Source: <a href="https://github.com/ByMaxAnjos/climasus4r/blob/master/R/sus_climate_inmet.R" class="external-link"><code>R/sus_climate_inmet.R</code></a></small>
      <div class="d-none name"><code>sus_climate_inmet.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>sus_climate_inmet()</code> downloads, imports, standardizes, and quality-controls
Brazilian meteorological data from the National Institute of Meteorology (INMET).</p>
<p>The function implements a <strong>comprehensive processing pipeline</strong>:</p><ol><li><p><strong>Download</strong>: Multi-year data with automatic retry and backoff</p></li>
<li><p><strong>Parsing</strong>: Handles INMET's CSV format with metadata extraction</p></li>
<li><p><strong>Standardization</strong>: Renames columns to canonical names (see <strong>Variables</strong>)</p></li>
<li><p><strong>Quality Control</strong>: Physical consistency checks (see <strong>QC Details</strong>)</p></li>
<li><p><strong>Caching</strong>: Two-level (memory + disk) with Parquet format</p></li>
<li><p><strong>Parallel Processing</strong>: Both between and within years</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sus_climate_inmet</span><span class="op">(</span></span>
<span>  years <span class="op">=</span> <span class="fl">2022</span>,</span>
<span>  uf <span class="op">=</span> <span class="st">"AM"</span>,</span>
<span>  use_cache <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cache_dir <span class="op">=</span> <span class="st">"~/.climasus4r_cache/climate"</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  workers <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  lang <span class="op">=</span> <span class="st">"pt"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-years">years<a class="anchor" aria-label="anchor" href="#arg-years"></a></dt>
<dd><p>Numeric vector of year(s) to import.
Examples: <code>2020</code>, <code>2020:2024</code>, <code>c(2019, 2021, 2023)</code>.
Must be between 2000 and current year. If <code>NULL</code>, imports last 2 years.</p></dd>


<dt id="arg-uf">uf<a class="anchor" aria-label="anchor" href="#arg-uf"></a></dt>
<dd><p>Character vector of Brazilian state codes (e.g., <code>"AM"</code>,
<code>c("RJ", "MG")</code>). Case insensitive. If <code>NULL</code> (default), imports
<strong>all 27 states</strong> (may be slow - see <strong>Performance</strong>).</p></dd>


<dt id="arg-use-cache">use_cache<a class="anchor" aria-label="anchor" href="#arg-use-cache"></a></dt>
<dd><p>Logical. If <code>TRUE</code> (default), implements two-level caching:</p><ul><li><p><strong>Session cache</strong>: In-memory cache (MD5 hash of parameters)</p></li>
<li><p><strong>Disk cache</strong>: Parquet files with Zstandard compression</p></li>
</ul><p>Use <code>unlink(cache_dir, recursive = TRUE)</code> to clear all caches.</p></dd>


<dt id="arg-cache-dir">cache_dir<a class="anchor" aria-label="anchor" href="#arg-cache-dir"></a></dt>
<dd><p>Character. Directory path for disk cache.
Default: <code>"~/.climasus4r_cache/climate"</code>. Created automatically.</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>Logical. If <code>TRUE</code> (default), enables <strong>two levels</strong> of parallelism:</p><ul><li><p><strong>Between years</strong>: Multiple years downloaded simultaneously</p></li>
<li><p><strong>Within year</strong>: CSV files for each year parsed in parallel</p></li>
</ul><p>For single-year imports, only within-year parallelization applies.</p></dd>


<dt id="arg-workers">workers<a class="anchor" aria-label="anchor" href="#arg-workers"></a></dt>
<dd><p>Integer. Number of parallel workers. Default: <code>4</code>.
Ignored if <code>parallel = FALSE</code>. Uses <code>future::multisession</code> backend.
Automatically capped at <code>availableCores() - 1</code>.</p></dd>


<dt id="arg-lang">lang<a class="anchor" aria-label="anchor" href="#arg-lang"></a></dt>
<dd><p>Character. Message language. One of:</p><ul><li><p><code>"pt"</code>: Portuguese (default)</p></li>
<li><p><code>"en"</code>: English</p></li>
<li><p><code>"es"</code>: Spanish</p></li>
</ul></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical. If <code>TRUE</code> (default), prints detailed progress including:</p><ul><li><p>Cache hits/misses</p></li>
<li><p>Download progress with retry attempts</p></li>
<li><p>QC modifications (rows corrected/removed)</p></li>
<li><p>Final statistics</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>climasus_df</code> object (subclass of <code>tibble</code>) with class hierarchy:
<code>climasus_df</code> &gt; <code>tbl_df</code> &gt; <code>tbl</code> &gt; <code>data.frame</code></p>
<p><strong>Data Columns:</strong></p><dl><dt><code>station_code</code></dt>
<dd><p>Character. INMET 8-digit station identifier (e.g., "A001")</p></dd>

<dt><code>station_name</code></dt>
<dd><p>Character. Full station name</p></dd>

<dt><code>region</code></dt>
<dd><p>Character. Brazilian region (Norte, Nordeste, etc.)</p></dd>

<dt><code>UF</code></dt>
<dd><p>Character. State abbreviation</p></dd>

<dt><code>latitude</code>, <code>longitude</code>, <code>altitude</code></dt>
<dd><p>Numeric. Station coordinates (WGS84)</p></dd>

<dt><code>date</code></dt>
<dd><p>POSIXct. Observation timestamp <strong>UTC</strong> (always hourly)</p></dd>

<dt><code>year</code></dt>
<dd><p>Integer. Year extracted from date</p></dd>

<dt><strong>Climate variables</strong></dt>
<dd><p>Numeric. Standardized names (see <strong>Variables</strong>)</p></dd>


</dl><p><strong>Metadata</strong> (accessible via <code>attr(x, "climasus_meta")</code>):</p><dl><dt><code>version</code></dt>
<dd><p>Package version used</p></dd>

<dt><code>timestamp</code></dt>
<dd><p>Import date/time</p></dd>

<dt><code>source</code></dt>
<dd><p>"INMET"</p></dd>

<dt><code>years</code></dt>
<dd><p>Years imported</p></dd>

<dt><code>ufs</code></dt>
<dd><p>States imported</p></dd>

<dt><code>cache_used</code></dt>
<dd><p>Whether cache was used</p></dd>

<dt><code>qc_stats</code></dt>
<dd><p>List with quality control statistics</p></dd>

<dt><code>n_stations</code></dt>
<dd><p>Number of unique stations</p></dd>

<dt><code>n_observations</code></dt>
<dd><p>Total rows</p></dd>

<dt><code>temporal_coverage</code></dt>
<dd><p>List with <code>start</code> and <code>end</code> dates</p></dd>

<dt><code>history</code></dt>
<dd><p>Character vector of processing steps</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>

<ul><li><p><strong>Data frequency</strong>: Always <strong>hourly</strong>. Use <code>sus_climate_aggregate()</code> for daily/weekly.</p></li>
<li><p><strong>Timezone</strong>: All timestamps are <strong>UTC</strong>. Convert if needed.</p></li>
<li><p><strong>Missing data</strong>: Represented as <code>NA</code>. Use <code><a href="sus_climate_fill_gaps.html">sus_climate_fill_gaps()</a></code> for imputation.</p></li>
<li><p><strong>Encoding</strong>: All strings converted to UTF-8.</p></li>
<li><p><strong>Decimals</strong>: Converted from comma (<code>,</code>) to point (<code>.</code>).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="standardized-meteorological-variables">Standardized Meteorological Variables<a class="anchor" aria-label="anchor" href="#standardized-meteorological-variables"></a></h2>



<p>INMET raw column names vary by year. This function automatically detects and
renames them to the following canonical names:</p><table class="table table"><tr><td><strong>Canonical Name</strong></td><td><strong>Description</strong></td><td><strong>Unit</strong></td><td><strong>Physical Range</strong></td></tr><tr><td><code>rainfall_mm</code></td><td>Precipitation total</td><td>mm</td><td>0 - 500</td></tr><tr><td><code>patm_mb</code></td><td>Mean atmospheric pressure</td><td>mb</td><td>700 - 1100</td></tr><tr><td><code>patm_max_mb</code></td><td>Max atmospheric pressure</td><td>mb</td><td>700 - 1100</td></tr><tr><td><code>patm_min_mb</code></td><td>Min atmospheric pressure</td><td>mb</td><td>700 - 1100</td></tr><tr><td><code>sr_kj_m2</code></td><td>Solar radiation</td><td>kJ/m²</td><td>0 - 40000</td></tr><tr><td><code>tair_dry_bulb_c</code></td><td>Mean air temperature</td><td>°C</td><td>-90 - 60</td></tr><tr><td><code>tair_max_c</code></td><td>Max air temperature</td><td>°C</td><td>-90 - 60</td></tr><tr><td><code>tair_min_c</code></td><td>Min air temperature</td><td>°C</td><td>-90 - 60</td></tr><tr><td><code>dew_tmean_c</code></td><td>Mean dew point</td><td>°C</td><td>-90 - 60</td></tr><tr><td><code>dew_tmax_c</code></td><td>Max dew point</td><td>°C</td><td>-90 - 60</td></tr><tr><td><code>dew_tmin_c</code></td><td>Min dew point</td><td>°C</td><td>-90 - 60</td></tr><tr><td><code>rh_mean_porc</code></td><td>Mean relative humidity</td><td>%</td><td>0 - 100</td></tr><tr><td><code>rh_max_porc</code></td><td>Max relative humidity</td><td>%</td><td>0 - 100</td></tr><tr><td><code>rh_min_porc</code></td><td>Min relative humidity</td><td>%</td><td>0 - 100</td></tr><tr><td><code>ws_2_m_s</code></td><td>Wind speed at 2m</td><td>m/s</td><td>0 - 100</td></tr><tr><td><code>ws_gust_m_s</code></td><td>Wind gust</td><td>m/s</td><td>0 - 100</td></tr><tr><td><code>wd_degrees</code></td><td>Wind direction</td><td>degrees</td><td>0 - 360</td></tr></table></div>
    <div class="section level2">
    <h2 id="quality-control-details">Quality Control Details<a class="anchor" aria-label="anchor" href="#quality-control-details"></a></h2>



<p>The function applies <strong>automatic physical consistency checks</strong>:</p>
<p><strong>1. Physical Range Validation:</strong>
Values outside physically possible ranges are set to <code>NA</code>:</p><ul><li><p><strong>Temperature</strong>: -90°C to 60°C</p></li>
<li><p><strong>Pressure</strong>: 700 mb to 1100 mb</p></li>
<li><p><strong>Humidity</strong>: 0% to 100%</p></li>
<li><p><strong>Precipitation</strong>: 0 mm to 500 mm</p></li>
<li><p><strong>Solar radiation</strong>: 0 to 40000 kJ/m²</p></li>
<li><p><strong>Wind speed</strong>: 0 to 100 m/s</p></li>
<li><p><strong>Wind direction</strong>: 0° to 360°</p></li>
</ul><p><strong>2. Dew Point Consistency:</strong>
Calculates theoretical dew point from T and RH using Magnus formula.
If |observed - calculated| &gt; 3°C, observed is set to NA.</p>
<p><strong>3. Solar Radiation:</strong>
Nighttime values (18h-6h) are set to 0 for physical consistency.</p>
    </div>
    <div class="section level2">
    <h2 id="caching-system-details">Caching System Details<a class="anchor" aria-label="anchor" href="#caching-system-details"></a></h2>



<p><strong>Disk Cache:</strong></p><ul><li><p><strong>Format</strong>: Apache Parquet with Zstandard compression (level 6)</p></li>
<li><p><strong>Partitioning</strong>: By <code>year</code> and <code>UF</code> for fast filtering</p></li>
<li><p><strong>Backup</strong>: Compressed CSV as fallback if Parquet corrupted</p></li>
<li><p><strong>Location</strong>: <code>~/.climasus4r_cache/climate/inmet_parquet/</code></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><code><a href="sus_climate_fill_gaps.html">sus_climate_fill_gaps()</a></code> for ML-based gap filling</p></li>
<li><p><code><a href="sus_join_spatial.html">sus_join_spatial()</a></code> for preparing municipality data</p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span>
<span><span class="co"># Basic import - single state, single year</span></span>
<span><span class="va">climate_am</span> <span class="op">&lt;-</span> <span class="fu">sus_climate_inmet</span><span class="op">(</span></span>
<span>  years <span class="op">=</span> <span class="fl">2023</span>,</span>
<span>  uf <span class="op">=</span> <span class="st">"AM"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Multi-year import with parallel processing</span></span>
<span><span class="va">climate_sp</span> <span class="op">&lt;-</span> <span class="fu">sus_climate_inmet</span><span class="op">(</span></span>
<span>  years <span class="op">=</span> <span class="fl">2020</span><span class="op">:</span><span class="fl">2024</span>,</span>
<span>  uf <span class="op">=</span> <span class="st">"SP"</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  workers <span class="op">=</span> <span class="fl">4</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Import all Southeast states</span></span>
<span><span class="va">climate_se</span> <span class="op">&lt;-</span> <span class="fu">sus_climate_inmet</span><span class="op">(</span></span>
<span>  years <span class="op">=</span> <span class="fl">2023</span>,</span>
<span>  uf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SP"</span>, <span class="st">"RJ"</span>, <span class="st">"MG"</span>, <span class="st">"ES"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Inspect available stations</span></span>
<span><span class="va">climate_df</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">station_code</span>, <span class="va">station_name</span>, <span class="va">latitude</span>, <span class="va">longitude</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="co"># }</span></span>
<span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Max Anjos, Thaua Menezes.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

