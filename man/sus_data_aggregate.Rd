% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sus_data_aggregate.R
\name{sus_data_aggregate}
\alias{sus_data_aggregate}
\title{Aggregate Health Data into Time Series}
\usage{
sus_data_aggregate(
  df,
  time_unit = "day",
  date_col = NULL,
  group_by = NULL,
  complete_dates = TRUE,
  lang = "pt",
  verbose = TRUE
)
}
\arguments{
\item{df}{A data frame containing health data (output from \code{sus_data_filter_cid()}
or \code{sus_data_standardize()}).}

\item{time_unit}{Character string specifying the temporal aggregation unit.
\strong{Standard units}: \code{"day"}, \code{"week"}, \code{"month"}, \code{"quarter"}, \code{"year"}
\strong{Multi-day/week/month}: \code{"2 days"}, \code{"5 days"} (pentads), \code{"14 days"} (fortnightly),
\code{"3 months"} (trimester), \code{"6 months"} (semester).
\strong{Special}: \code{"season"} (Brazilian seasons: DJF, MAM, JJA, SON).
Default is \code{"day"}.}

\item{date_col}{Character string with the name of the date column to use for
aggregation. If \code{NULL} (default), the function will attempt to auto-detect
the date column based on common patterns.}

\item{group_by}{Character vector with names of columns to group by (e.g.,
\code{c("sex", "age_group", "municipality_code", "race")}). If \code{NULL} (default), aggregates
across all records.}

\item{complete_dates}{Logical. If \code{TRUE} (default), fills in missing time periods
with zero counts to create a complete time series without gaps.}

\item{lang}{Character string specifying the language for messages. Options:
\code{"en"} (English, default), \code{"pt"} (Portuguese, default), \code{"es"} (Spanish).}

\item{verbose}{Logical. If \code{TRUE} (default), prints progress messages.}
}
\value{
A tibble with aggregated counts containing:
\itemize{
\item \code{date}: The aggregated date (start of period)
\item Grouping columns (if \code{group_by} was specified)
\item \code{n}: Count of events in that period
}
}
\description{
Aggregates individual-level health data into time series counts by specified
time units and grouping variables. This function is essential for preparing
data for time series analysis, DLNM models, and other temporal epidemiological methods.
}
\details{
\strong{Epidemiological Use Cases}:
\itemize{
\item \strong{Daily/Weekly}: Standard time series analysis, DLNM for short-term effects
\item \strong{Pentads (5 days)}: Heat wave analysis, smoothing daily noise
\item \strong{Fortnightly (14 days)}: Diseases with longer incubation periods
\item \strong{Monthly}: Seasonal patterns, long-term trends
\item \strong{Quarterly}: SUS management reports, policy evaluation
\item \strong{Seasonal}: Dengue, Influenza, respiratory diseases aligned with Brazilian climate
\item \strong{Yearly}: Long-term trend analysis, climate change impacts
}

\strong{Brazilian Seasons} (when \code{time_unit = "season"}):
\itemize{
\item \strong{Summer (Verao)}: December-January-February (DJF)
\item \strong{Autumn (Outono)}: March-April-May (MAM)
\item \strong{Winter (Inverno)}: June-July-August (JJA)
\item \strong{Spring (Primavera)}: September-October-November (SON)
}
}
\examples{
\dontrun{
library(climasus4r)

# Basic daily aggregation
df_daily <- sus_data_import(uf = "SP", year = 2023, system = "SIM-DO") |>
  sus_data_standardize() |>
  sus_data_filter_cid(disease_group = "respiratory") |>
  sus_data_aggregate(time_unit = "day")

# Pentad aggregation (5-day periods) for heat wave analysis
df_pentad <- sus_data_aggregate(df, time_unit = "5 days")

# Fortnightly aggregation for diseases with longer incubation
df_fortnightly <- sus_data_aggregate(df, time_unit = "14 days")

# Monthly aggregation by municipality
df_monthly <- sus_data_aggregate(
  df,
  time_unit = "month",
  group_by = c("race", "sex"),
  lang = "pt"
)

# Quarterly aggregation for SUS reports
df_quarterly <- sus_data_aggregate(df, time_unit = "quarter")

# Seasonal aggregation for dengue analysis (Brazilian seasons)
df_seasonal <- sus_data_aggregate(
  df,
  time_unit = "season",
  group_by = "state"
)

# Weekly aggregation by age group and sex
df_weekly <- sus_data_aggregate(
  df,
  time_unit = "week",
  group_by = c("age_group", "sex")
)
}
}
